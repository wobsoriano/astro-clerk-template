import{a as E,$ as z,b as M,c as h}from"./chunk-Q2WNSHVA.Csvbm9VB.js";const O=5,d=6,f=10;let U=(n,e,s,u)=>(n.events=n.events||{},n.events[s+f]||(n.events[s+f]=u(r=>{n.events[s].reduceRight((t,o)=>(o(t),t),{shared:{},...r})})),n.events[s]=n.events[s]||[],n.events[s].push(e),()=>{let r=n.events[s],t=r.indexOf(e);r.splice(t,1),r.length||(delete n.events[s],n.events[s+f](),delete n.events[s+f])}),R=1e3,S=(n,e)=>U(n,u=>{let r=e(u);r&&n.events[d].push(r)},O,u=>{let r=n.listen;n.listen=(...o)=>(!n.lc&&!n.active&&(n.active=!0,u()),r(...o));let t=n.off;return n.events[d]=[],n.off=()=>{t(),setTimeout(()=>{if(n.active&&!n.lc){n.active=!1;for(let o of n.events[d])o();n.events[d]=[]}},R)},()=>{n.listen=r,n.off=t}}),A=(n,e,s)=>{Array.isArray(n)||(n=[n]);let u,r=0,t=()=>{let l=n.map(i=>i.get());if(u===void 0||l.some((i,g)=>i!==u[g])){let i=++r;u=l;let g=e(...l);g&&g.then&&g.t?g.then(v=>{i===r&&o.set(v)}):o.set(g)}},o=E(void 0,Math.max(...n.map(l=>l.l))+1),c=t;return S(o,()=>{let l=n.map(i=>i.listen(c,-1/o.l));return t(),()=>{for(let i of l)i()}}),o},a=(n,e)=>A(n,e);var N="METHOD_CALLED";function L(n,e){return{event:N,payload:{method:n,...e}}}function _(n,e,s){return!n&&s?{...D(s),clerkLoaded:n}:{...x(e),clerkLoaded:n}}function D(n){const e=n.userId,s=n.user,u=n.sessionId,r=n.session,t=n.organization,o=n.orgId,c=n.orgRole,l=n.orgPermissions,i=n.orgSlug,g=n.actor;return{userId:e,user:s,sessionId:u,session:r,organization:t,orgId:o,orgRole:c,orgPermissions:l,orgSlug:i,actor:g}}function x(n){const e=n.user?n.user.id:n.user,s=n.user,u=n.session?n.session.id:n.session,r=n.session,t=r?.actor,o=n.organization,c=n.organization?n.organization.id:n.organization,l=o?.slug,i=o&&s?.organizationMemberships?.find(T=>T.organization.id===c),g=i&&i.permissions,v=i&&i.role;return{userId:e,user:s,sessionId:u,session:r,organization:o,orgId:c,orgRole:v,orgSlug:l,orgPermissions:g,actor:t}}var m=a([z,M],(n,e)=>_(n.isLoaded,{session:n.session,user:n.user,organization:n.organization,client:n.client},e)),V=a([m],n=>n.user),Y=a([m],n=>n.session),C=a([m],n=>n.organization),p=a([z],n=>n.client);a([h],n=>n);a([p],n=>n?.sessions);var P=a([p],n=>n?.signIn),F=a([p],n=>n?.signUp),I=(n,e)=>{S(n,()=>{h.get()?.telemetry?.record(L(e))})};I(P,"$signInStore");I(F,"$signUpStore");I(C,"$organizationStore");export{V as $,Y as a,C as b};
